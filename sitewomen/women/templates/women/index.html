{% extends 'base.html' %}
{% block content %}
  <ul class="list-articles">
  {% for p in posts %}
    {% if p.is_published %}
      <li><h2>{{ p.title }}</h2>
        {% autoescape off %} <!-- Отключает экранирование (теперь html теги внутри строки воспринимаются браузером) -->
        {{ p.content|linebreaks|truncatewords:40 }}
        {% endautoescape %}
          <div class="clear"></div>
          <p class="link-read-post"><a href='{% url "post" p.id %}'>Читать пост</a></p>
        {% if not forloop.last %}
          <hr>
        {% endif %}
      </li>
      {% endif %}
    {% endfor %}
  </ul>

{% endblock %}

'''
Еще фильтры в html: 
-------------------
* truncatewords - ограничивает количетсов символов выводимых в строке, добавляет многоточие, 
если количество символов в строке было больше, чем указано в фильтре
Пример:
<p>{{ p.content|truncatewords:50 }}</p>
-------------------
* linebreaks - учитывает отступы в строке
Пример:
<p>{{ p.content|linebreaks }}</p>
'''